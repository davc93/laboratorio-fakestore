(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function c(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(e){if(e.ep)return;e.ep=!0;const o=c(e);fetch(e.href,o)}})();const I=document.getElementById("app"),d=document.getElementById("observe"),u="https://api.escuelajs.co/api/v1/products",p=document.createElement("section");let g;(async()=>{const t=await(await fetch(u)).json();g=Math.floor(t.length/10)})();p.classList.add("Items");const y=async(n,t,c)=>{const r=await fetch(`${n}?offset=${t}&limit=${c}`);console.log(r);const e=await r.json();console.log(e);let a=[...e].map(m=>{const i=document.createElement("article"),f=document.createElement("img"),l=document.createElement("h2"),b=document.createElement("small");return i.classList.add("Card"),f.src=m.images[0],l.textContent=m.title,l.append(b),i.append(f,l),i});p.append(...a),I.appendChild(p),h.observe(d)},v=async()=>{await y(u,5,s*10)},w=()=>{y(u,s,10),s=s+1,E(s),console.log(s)},h=new IntersectionObserver(n=>{n.forEach(t=>{s>=g&&(d.innerHTML="Todos los productos Obtenidos",h.unobserve(d)),t.isIntersecting&&w()})},{rootMargin:"0px 0px 100% 0px"}),E=(n=1)=>{localStorage.setItem("pagination",JSON.stringify(n))},O=()=>{var t;const n=(t=JSON.parse(localStorage.getItem("pagination")))!=null?t:1;return console.log(n),n};let s=O();v();
